<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Minijuego — Penales Mostaza</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- NAV (ninguna activa del navbar oficial, juego enlace externo desde secciones) -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <a class="navbar-brand d-flex align-items-center fw-bold" href="index.html">
      <img src="ayudadahiodc/ChatGPT_Image_21_ago_2025__17_41_34-removebg-preview.png" alt="Sporting Mostaza" width="50" height="50" class="me-2">
      Sporting Mostaza
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarNav"><span class="navbar-toggler-icon" style="filter: invert(1);"></span></button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Volver a Inicio</a></li>
      </ul>
    </div>
  </div>
</nav>

<header class="container my-4 text-center">
  <h1>Penales Mostaza ⚽</h1>
  <p class="lead">Haz clic para patear. Marca gol esquivando al arquero.</p>
</header>

<main class="container text-center pb-5">
  <canvas id="game" width="360" height="520" class="border rounded"></canvas>
  <div class="mt-3">
    <button id="reset" class="btn btn-brand">Reiniciar</button>
  </div>
</main>
<a  href="secreto.html">Secreto</a>
<footer class="site-footer text-center p-3">
  <small>© 2025 Sporting Mostaza</small>
</footer>

<script>
const c = document.getElementById('game');
const k = c.getContext('2d');

const field = { w: c.width, h: c.height, grass: '#D9A122', lines: '#fff' };
let score = 0, shots = 0;
const ball = { x: c.width/2, y: c.height-60, r: 10, color: '#fff', vx: 0, vy: 0, speed: 8, inPlay: false };
const goalie = { x: c.width/2-30, y: 120, w: 60, h: 12, vx: 3, color: '#3B2B1B' };
const goal = { x: 40, y: 100, w: c.width-80, h: 14, color: '#ffffff' };

function drawField(){
  // fondo
  k.fillStyle = field.grass;
  k.fillRect(0,0,field.w, field.h);
  // área del arco
  k.strokeStyle = field.lines;
  k.lineWidth = 2;
  k.strokeRect(goal.x, goal.y, goal.w, goal.h);
  // punto de penal
  k.beginPath();
  k.arc(c.width/2, c.height-80, 3, 0, Math.PI*2); k.fillStyle = field.lines; k.fill();
  // marcador
  k.fillStyle = '#000';
  k.font = '16px Arial';
  k.fillText(`Goles: ${score}  |  Tiros: ${shots}`, 10, 20);
}

function drawBall(){
  k.beginPath();
  k.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  k.fillStyle = ball.color; k.fill();
}

function drawGoalie(){
  // barra como arquero
  k.fillStyle = goalie.color;
  k.fillRect(goalie.x, goalie.y, goalie.w, goalie.h);
}

function resetBall(){
  ball.x = c.width/2;
  ball.y = c.height-60;
  ball.vx = 0; ball.vy = 0;
  ball.inPlay = false;
}

function shoot(targetX){
  if(ball.inPlay) return;
  shots++;
  // Dirección hacia donde clickeas en la zona del arco
  const dx = targetX - ball.x;
  const dy = (goal.y + goal.h/2) - ball.y;
  const mag = Math.hypot(dx, dy);
  ball.vx = (dx / mag) * ball.speed;
  ball.vy = (dy / mag) * ball.speed;
  ball.inPlay = true;
}

function update(){
  // mover arquero izquierda-derecha
  goalie.x += goalie.vx;
  if(goalie.x <= goal.x || goalie.x + goalie.w >= goal.x + goal.w){
    goalie.vx *= -1;
  }

  // mover balón
  if(ball.inPlay){
    ball.x += ball.vx;
    ball.y += ball.vy;

    // ¿gol? (cruza línea del arco sin chocar al arquero)
    if(ball.y <= goal.y + goal.h && ball.y > goal.y - 10){
      // Colisión simple con el arquero
      const collide = ball.x > goalie.x && ball.x < (goalie.x + goalie.w) &&
                      ball.y - ball.r <= (goalie.y + goalie.h) && (ball.y + ball.r) >= goalie.y;
      if(!collide){
        score++;
      }
      resetBall();
    }

    // si se va por arriba o lateral, reinicia
    if(ball.y < 0 || ball.x < 0 || ball.x > c.width) resetBall();
  }

  // render
  k.clearRect(0,0,c.width,c.height);
  drawField();
  drawGoalie();
  drawBall();

  requestAnimationFrame(update);
}

c.addEventListener('click', (e)=>{
  const rect = c.getBoundingClientRect();
  const x = e.clientX - rect.left;
  shoot(x);
});
document.getElementById('reset').addEventListener('click', ()=>{
  score = 0; shots = 0; resetBall();
});



resetBall();
update();

</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
